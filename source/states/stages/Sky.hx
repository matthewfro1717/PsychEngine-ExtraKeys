package states.stages;

import stages.objects.*;
import stages.objects.MansionDebris;
import GameOverSubstate;
import DialogueBox;

#if MODS_ALLOWED
import sys.FileSystem;
#else
import openfl.utils.Assets as OpenFlAssets;
#end

class School extends BaseStage
{
	override function create()
	{
		var sky = new FlxSprite(-850, -850);
		sky.frames = Paths.getSparrowAtlas('god_bg');
		sky.animation.addByPrefix('sky', "bg", 30);
		sky.setGraphicSize(Std.int(sky.width * 0.8));
		sky.animation.play('sky');
		sky.scrollFactor.set(0.1, 0.1);
		sky.antialiasing = true;
		add(sky);

		var bgcloud = new FlxSprite(-850, -1250);
		bgcloud.frames = Paths.getSparrowAtlas('god_bg');
		bgcloud.animation.addByPrefix('c', "cloud_smol", 30);
		//bgcloud.setGraphicSize(Std.int(bgcloud.width * 0.8));
		bgcloud.animation.play('c');
		bgcloud.scrollFactor.set(0.3, 0.3);
		bgcloud.antialiasing = true;
		add(bgcloud);

		add(new MansionDebris(300, -800, 'norm', 0.4, 1, 0, 1));
		add(new MansionDebris(600, -300, 'tiny', 0.4, 1.5, 0, 1));
		add(new MansionDebris(-150, -400, 'spike', 0.4, 1.1, 0, 1));
		add(new MansionDebris(-750, -850, 'small', 0.4, 1.5, 0, 1));

		/*
		add(new MansionDebris(-300, -1700, 'norm', 0.5, 1, 0, 1));
		add(new MansionDebris(-600, -1100, 'tiny', 0.5, 1.5, 0, 1));
		add(new MansionDebris(900, -1850, 'spike', 0.5, 1.2, 0, 1));
		add(new MansionDebris(1500, -1300, 'small', 0.5, 1.5, 0, 1));
		*/

		add(new MansionDebris(-300, -1700, 'norm', 0.75, 1, 0, 1));
		add(new MansionDebris(-1000, -1750, 'rect', 0.75, 2, 0, 1));
		add(new MansionDebris(-600, -1100, 'tiny', 0.75, 1.5, 0, 1));
		add(new MansionDebris(900, -1850, 'spike', 0.75, 1.2, 0, 1));
		add(new MansionDebris(1500, -1300, 'small', 0.75, 1.5, 0, 1));
		add(new MansionDebris(-600, -800, 'spike', 0.75, 1.3, 0, 1));
		add(new MansionDebris(-1000, -900, 'small', 0.75, 1.7, 0, 1));

		var fgcloud = new FlxSprite(-1150, -2900);
		fgcloud.frames = Paths.getSparrowAtlas('god_bg');
		fgcloud.animation.addByPrefix('c', "cloud_big", 30);
		//bgcloud.setGraphicSize(Std.int(bgcloud.width * 0.8));
		fgcloud.animation.play('c');
		fgcloud.scrollFactor.set(0.9, 0.9);
		fgcloud.antialiasing = true;
		add(fgcloud);

		var bg:FlxSprite = new FlxSprite(-400, -160).loadGraphic(Paths.image('bg_lemon'));
		bg.setGraphicSize(Std.int(bg.width * 1.5));
		bg.antialiasing = true;
		bg.scrollFactor.set(0.95, 0.95);
		bg.active = false;
		add(bg);

		var techo = new FlxSprite(0, -20);
		techo.frames = Paths.getSparrowAtlas('god_bg');
		techo.animation.addByPrefix('r', "broken_techo", 30);
		techo.setGraphicSize(Std.int(techo.frameWidth * 1.5));
		techo.animation.play('r');
		techo.scrollFactor.set(0.95, 0.95);
		techo.antialiasing = true;
		add(techo);

		gf_rock = new FlxSprite(20, 20);
		gf_rock.frames = Paths.getSparrowAtlas('god_bg');
		gf_rock.animation.addByPrefix('rock', "gf_rock", 30);
		gf_rock.animation.play('rock');
		gf_rock.scrollFactor.set(0.8, 0.8);
		gf_rock.antialiasing = true;
		add(gf_rock);

		rock = new FlxSprite(20, 20);
		rock.frames = Paths.getSparrowAtlas('god_bg');
		rock.animation.addByPrefix('rock', "rock", 30);
		rock.animation.play('rock');
		rock.scrollFactor.set(1, 1);
		rock.antialiasing = true;
		add(rock);
	}
}